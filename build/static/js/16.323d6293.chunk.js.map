{"version":3,"sources":["utils/converter.js","../node_modules/@material-ui/icons/esm/AccessTime.js","pages/AUTH/History/History.styles.jsx","pages/AUTH/History/History.jsx"],"names":["timeToClient","date","tmpDate","Date","day","getDate","slice","month","getMonth","year","getFullYear","hours","getHours","mins","getMinutes","createSvgIcon","React","d","makeStyles","theme","root","minHeight","paddingTop","background","palette","secondary","main","section","position","marginBottom","spacing","breakpoints","down","release","left","top","zIndex","padding","borderRadius","time","fontSize","marginLeft","pagination","marginTop","color","borderColor","alpha","primary","History","classes","useStyles","dispatch","useDispatch","totalPages","useSelector","state","history","results","useState","page","setPage","error","setError","getHistoryHandler","useCallback","limit","a","getHistory","unwrap","toast","useEffect","useLayoutEffect","window","scrollTo","className","Box","length","Typography","style","textAlign","Grid","container","map","movie","index","item","xs","sm","md","lg","display","flexWrap","alignItems","AccessTime","iconTime","variant","MovieItem","id","media","_id","title","image","posterUrl","description","overview","Pagination","shape","onChange","event","value","count"],"mappings":"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","file":"static/js/16.323d6293.chunk.js","sourcesContent":["export const timeToClient = (date) => {\r\n  const tmpDate = new Date(date);\r\n  const day = ('0' + tmpDate.getDate()).slice(-2);\r\n  const month = ('0' + (tmpDate.getMonth() + 1)).slice(-2);\r\n  const year = tmpDate.getFullYear();\r\n\r\n  const hours = ('0' + tmpDate.getHours()).slice(-2);\r\n  const mins = ('0' + tmpDate.getMinutes()).slice(-2);\r\n\r\n  return `${day}/${month}/${year} ${hours}:${mins}`;\r\n};\r\n","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\"\n})), 'AccessTime');","import { alpha } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: '100vh',\r\n    paddingTop: '20vh',\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  section: {\r\n    position: 'relative',\r\n    '&:nth-child(n + 6)': {\r\n      marginBottom: theme.spacing(7),\r\n    },\r\n    [theme.breakpoints.down('md')]: {\r\n      '&:nth-child(n + 4)': {\r\n        marginBottom: theme.spacing(6),\r\n      },\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      '&:nth-child(n + 3)': {\r\n        marginBottom: theme.spacing(5),\r\n      },\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      '&:nth-child(n + 2)': {\r\n        marginBottom: theme.spacing(4),\r\n      },\r\n    },\r\n  },\r\n  release: {\r\n    position: 'absolute',\r\n    left: theme.spacing(2),\r\n    top: theme.spacing(2),\r\n    zIndex: 1,\r\n    background: '#fff',\r\n    padding: theme.spacing(0.25, 0.5),\r\n    borderRadius: 3,\r\n  },\r\n  time: {\r\n    fontSize: 12,\r\n    marginLeft: 5,\r\n  },\r\n  pagination: {\r\n    marginTop: theme.spacing(5),\r\n    '& .MuiPaginationItem-root': {\r\n      color: '#fff',\r\n      borderColor: alpha('#fff', 0.5),\r\n    },\r\n    '& .MuiPaginationItem-root.Mui-selected': {\r\n      color: theme.palette.primary.main,\r\n      borderColor: theme.palette.primary.main,\r\n    },\r\n  },\r\n}));\r\n","import { Box, Grid, Typography } from '@material-ui/core';\r\nimport React, { useCallback, useLayoutEffect, useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport MovieItem from '../../../components/MovieItem/MovieItem';\r\nimport { toast } from 'react-toastify';\r\nimport useStyles from './History.styles';\r\nimport { getHistory } from '../../../slices/history.slice';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport { AccessTime } from '@material-ui/icons';\r\nimport { timeToClient } from '../../../utils/converter';\r\n\r\nfunction History() {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const totalPages = useSelector((state) => state.history.totalPages);\r\n  // const totalResults = useSelector((state) => state.history.totalResults);\r\n  // const currentPage = useSelector((state) => state.history.page);\r\n  // const isLoading = useSelector((state) => state.search.isLoading);\r\n\r\n  const results = useSelector((state) => state.history.results);\r\n  const [page, setPage] = useState(1);\r\n  // const [limit, setLimit] = useState(42);\r\n  const limit = 42;\r\n  const [error, setError] = useState(null);\r\n\r\n  const pageChangeHandler = (event, value) => {\r\n    setPage(value);\r\n  };\r\n\r\n  const getHistoryHandler = useCallback(\r\n    async (page, limit) => {\r\n      setError(null);\r\n      try {\r\n        await dispatch(\r\n          getHistory({\r\n            page,\r\n            limit,\r\n          })\r\n        ).unwrap();\r\n      } catch (error) {\r\n        toast.error(error);\r\n        setError('Something went wrong!');\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  useEffect(() => {\r\n    getHistoryHandler(page, limit);\r\n  }, [dispatch, page, limit, getHistoryHandler]);\r\n\r\n  useLayoutEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n  return (\r\n    <div className={classes.root}>\r\n      <Box padding=\"0 4%\">\r\n        {!results || results?.length === 0 ? (\r\n          <Typography color=\"primary\" style={{ textAlign: 'center' }}>\r\n            {error ? error : `No data available`}\r\n          </Typography>\r\n        ) : (\r\n          <></>\r\n        )}\r\n        <Grid container spacing={2}>\r\n          {results?.map((movie, index) => (\r\n            <Grid item xs={6} sm={4} md={3} lg={2} key={index} className={classes.section}>\r\n              <Box className={classes.release} display=\"flex\" flexWrap=\"wrap\" alignItems=\"center\">\r\n                <AccessTime fontSize=\"small\" className={classes.iconTime} />\r\n                <Typography variant=\"body1\" className={classes.time}>\r\n                  {movie.date && timeToClient(movie.date)}\r\n                </Typography>\r\n              </Box>\r\n              <MovieItem\r\n                id={movie.media?._id}\r\n                title={movie.media?.title}\r\n                image={movie.media?.posterUrl}\r\n                description={movie.media?.overview}\r\n                // genres={movie.media?.genres.map((item) => item.name)}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n        {totalPages > 0 && (\r\n          <div className={classes.pagination}>\r\n            <Pagination\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              shape=\"rounded\"\r\n              page={page}\r\n              onChange={pageChangeHandler}\r\n              count={totalPages}\r\n            />\r\n          </div>\r\n        )}\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;\r\n"],"sourceRoot":""}