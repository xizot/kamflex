{"version":3,"sources":["pages/Search/Search.styles.jsx","pages/Search/Search.jsx"],"names":["makeStyles","theme","root","minHeight","paddingTop","background","palette","secondary","main","section","marginBottom","spacing","breakpoints","down","pagination","marginTop","color","borderColor","alpha","primary","Search","classes","useStyles","dispatch","useDispatch","location","useLocation","totalPages","useSelector","state","search","results","query","decodeURIComponent","slice","useState","page","setPage","error","setError","getSearchHandler","useCallback","limit","a","sort","getSearch","unwrap","toast","useEffect","length","searchActions","searchChange","className","Box","padding","Typography","style","textAlign","Grid","container","map","movie","index","item","xs","sm","md","lg","MovieItem","id","_id","title","image","posterUrl","description","overview","genres","name","Pagination","variant","shape","onChange","event","value","count"],"mappings":"iQAGeA,eAAW,SAACC,GAAD,YAAY,CACpCC,KAAM,CACJC,UAAW,QACXC,WAAY,OACZC,WAAYJ,EAAMK,QAAQC,UAAUC,MAEtCC,SAAO,GACL,qBAAsB,CACpBC,aAAcT,EAAMU,QAAQ,KAFzB,cAIJV,EAAMW,YAAYC,KAAK,MAAQ,CAC9B,qBAAsB,CACpBH,aAAcT,EAAMU,QAAQ,MAN3B,cASJV,EAAMW,YAAYC,KAAK,MAAQ,CAC9B,qBAAsB,CACpBH,aAAcT,EAAMU,QAAQ,MAX3B,cAcJV,EAAMW,YAAYC,KAAK,MAAQ,CAC9B,qBAAsB,CACpBH,aAAcT,EAAMU,QAAQ,MAhB3B,GAoBPG,WAAY,CACVC,UAAWd,EAAMU,QAAQ,GACzB,4BAA6B,CAC3BK,MAAO,OACPC,YAAaC,YAAM,OAAQ,KAE7B,yCAA0C,CACxCF,MAAOf,EAAMK,QAAQa,QAAQX,KAC7BS,YAAahB,EAAMK,QAAQa,QAAQX,W,gBCgE1BY,UA1Ff,WACE,IAAMC,EAAUC,IACVC,EAAWC,cACXC,EAAWC,cAEXC,EAAaC,aAAY,SAACC,GAAD,OAAWA,EAAMC,OAAOH,cAIjDI,EAAUH,aAAY,SAACC,GAAD,OAAWA,EAAMC,OAAOC,WAE9CC,EAAQC,mBAAmBR,EAASK,OAAOI,MAAM,IACvD,EAAwBC,mBAAS,GAAjC,mBAAOC,EAAP,KAAaC,EAAb,KAGA,EAA0BF,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KAMMC,EAAmBC,sBAAW,uCAClC,WAAOX,EAAQM,EAAMM,GAArB,2BAAAC,EAAA,6DAA4BC,EAA5B,+BAAmC,aACjCL,EAAS,MADX,kBAGUhB,EACJsB,YAAU,CACRf,SACAM,OACAM,QACAE,UAEFE,SAVN,uDAYIC,IAAMT,MAAN,MACAC,EAAS,yBAbb,yDADkC,0DAiBlC,CAAChB,IASH,OANAyB,qBAAU,WACJhB,EAAMiB,OAAS,IACjB1B,EAAS2B,IAAcC,aAAanB,IACpCQ,EAAiBR,EAAOI,EA9Bd,OAgCX,CAACb,EAAUa,EAAMJ,EAhCN,GAgCoBQ,IAEhC,qBAAKY,UAAW/B,EAAQnB,KAAxB,SACE,eAACmD,EAAA,EAAD,CAAKC,QAAQ,OAAb,UACIvB,GAA+B,KAAb,OAAPA,QAAO,IAAPA,OAAA,EAAAA,EAASkB,QAOpB,6BANA,cAACM,EAAA,EAAD,CAAYC,MAAO,CAAEC,UAAW,UAAYzC,MAAM,UAAlD,SACGsB,GAAK,sDAE6CN,EAF7C,qCAOV,cAAC0B,EAAA,EAAD,CAAMC,WAAS,EAAChD,QAAS,EAAzB,gBACGoB,QADH,IACGA,OADH,EACGA,EAAS6B,KAAI,SAACC,EAAOC,GAAR,aACZ,cAACJ,EAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAef,UAAW/B,EAAQZ,QAAtE,SACE,cAAC2D,EAAA,EAAD,CACEC,GAAIR,EAAMS,IACVC,MAAOV,EAAMU,MACbC,MAAOX,EAAMY,UACbC,YAAab,EAAMc,SACnBC,OAAM,UAAEf,EAAMe,cAAR,aAAE,EAAchB,KAAI,SAACG,GAAD,OAAUA,EAAKc,WANDf,QAY/CnC,EAAa,GACZ,qBAAKyB,UAAW/B,EAAQP,WAAxB,SACE,cAACgE,EAAA,EAAD,CACE9D,MAAM,UACN+D,QAAQ,WACRC,MAAM,UACN5C,KAAMA,EACN6C,SA/Dc,SAACC,EAAOC,GAChC9C,EAAQ8C,IA+DEC,MAAOzD","file":"static/js/20.192aba91.chunk.js","sourcesContent":["import { alpha } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    minHeight: '100vh',\r\n    paddingTop: '20vh',\r\n    background: theme.palette.secondary.main,\r\n  },\r\n  section: {\r\n    '&:nth-child(n + 6)': {\r\n      marginBottom: theme.spacing(7),\r\n    },\r\n    [theme.breakpoints.down('md')]: {\r\n      '&:nth-child(n + 4)': {\r\n        marginBottom: theme.spacing(6),\r\n      },\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      '&:nth-child(n + 3)': {\r\n        marginBottom: theme.spacing(5),\r\n      },\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      '&:nth-child(n + 2)': {\r\n        marginBottom: theme.spacing(4),\r\n      },\r\n    },\r\n  },\r\n  pagination: {\r\n    marginTop: theme.spacing(5),\r\n    '& .MuiPaginationItem-root': {\r\n      color: '#fff',\r\n      borderColor: alpha('#fff', 0.5),\r\n    },\r\n    '& .MuiPaginationItem-root.Mui-selected': {\r\n      color: theme.palette.primary.main,\r\n      borderColor: theme.palette.primary.main,\r\n    },\r\n  },\r\n}));\r\n","import { Box, Grid, Typography } from '@material-ui/core';\r\nimport React, { useCallback, useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useLocation } from 'react-router';\r\nimport MovieItem from '../../components/MovieItem/MovieItem';\r\nimport { getSearch, searchActions } from '../../slices/search.slice';\r\nimport { toast } from 'react-toastify';\r\nimport useStyles from './Search.styles';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\n\r\nfunction Search() {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const totalPages = useSelector((state) => state.search.totalPages);\r\n  // const totalResults = useSelector((state) => state.search.totalResults);\r\n  // const currentPage = useSelector((state) => state.search.page);\r\n  // const isLoading = useSelector((state) => state.search.isLoading);\r\n  const results = useSelector((state) => state.search.results);\r\n\r\n  const query = decodeURIComponent(location.search.slice(3));\r\n  const [page, setPage] = useState(1);\r\n  // const [limit, setLimit] = useState(42);\r\n  const limit = 42;\r\n  const [error, setError] = useState(null);\r\n\r\n  const pageChangeHandler = (event, value) => {\r\n    setPage(value);\r\n  };\r\n\r\n  const getSearchHandler = useCallback(\r\n    async (search, page, limit, sort = 'asc(title)') => {\r\n      setError(null);\r\n      try {\r\n        await dispatch(\r\n          getSearch({\r\n            search,\r\n            page,\r\n            limit,\r\n            sort,\r\n          })\r\n        ).unwrap();\r\n      } catch (error) {\r\n        toast.error(error);\r\n        setError('Something went wrong!');\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (query.length > 0) {\r\n      dispatch(searchActions.searchChange(query));\r\n      getSearchHandler(query, page, limit);\r\n    }\r\n  }, [dispatch, page, query, limit, getSearchHandler]);\r\n  return (\r\n    <div className={classes.root}>\r\n      <Box padding=\"0 4%\">\r\n        {!results || results?.length === 0 ? (\r\n          <Typography style={{ textAlign: 'center' }} color=\"primary\">\r\n            {error\r\n              ? error\r\n              : `There were no results matching your search \"${query}\". Try entering another keyword`}\r\n          </Typography>\r\n        ) : (\r\n          <></>\r\n        )}\r\n        <Grid container spacing={2}>\r\n          {results?.map((movie, index) => (\r\n            <Grid item xs={6} sm={4} md={3} lg={2} key={index} className={classes.section}>\r\n              <MovieItem\r\n                id={movie._id}\r\n                title={movie.title}\r\n                image={movie.posterUrl}\r\n                description={movie.overview}\r\n                genres={movie.genres?.map((item) => item.name)}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        {totalPages > 0 && (\r\n          <div className={classes.pagination}>\r\n            <Pagination\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              shape=\"rounded\"\r\n              page={page}\r\n              onChange={pageChangeHandler}\r\n              count={totalPages}\r\n            />\r\n          </div>\r\n        )}\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n"],"sourceRoot":""}