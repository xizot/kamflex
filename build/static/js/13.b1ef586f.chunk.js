(this["webpackJsonpreact-movie"]=this["webpackJsonpreact-movie"]||[]).push([[13],{203:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(69),n=a(0),o=a(202),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object(n.useState)(t),i=Object(r.a)(a,2),l=i[0],c=i[1],s=Object(n.useState)(!1),d=Object(r.a)(s,2),u=d[0],p=d[1],m=!0,b=null;if(e){var h=o.object(e),f=h.validate({value:l}),g=f.error;g&&(b=g.toString(),m=!1)}var j=!m&&u,v=function(e){c(e.target.value)},y=function(){p(!0)},O=function(){p(!1),c("")};return Object(n.useEffect)((function(){c(t)}),[t]),{enteredInput:l,inputIsValid:m,hasError:j,inputChangeHandler:v,inputBlurHandler:y,inputReset:O,setEnteredInput:c,errorMsg:b,isTouched:u}}},204:function(e,t,a){"use strict";var r=a(55),n=a(208),o=a(172),i=a(183),l=a(295),c=(a(0),a(2)),s=["children","size","onClick","isLoading"],d=Object(o.a)((function(e){return{root:{display:"block","&.Mui-disabled":{background:"#ddd",cursort:"not-allowed"}},buttonLoading:{opacity:" 0.7 !important",minHeight:42}}}));t.a=function(e){var t=e.children,a=e.size,o=e.onClick,u=e.isLoading,p=Object(n.a)(e,s),m=d();return Object(c.jsxs)(c.Fragment,{children:[u&&Object(c.jsx)(i.a,{className:"".concat(m.root," ").concat(m.buttonLoading),fullWidth:!0,size:a,variant:"contained",color:"primary",startIcon:Object(c.jsx)(l.a,{size:22,style:{color:"#fff"}})}),!u&&Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({className:m.root,variant:"contained",color:"primary",fullWidth:!0,size:a,onClick:o},p),{},{children:t}))]})}},205:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return d}));var r=a(202),n={value:r.string().min(8).required().messages({"string.base":"Password should be a type of 'text'","string.empty":"Password cannot be an empty field","any.required":"Password is a required field","string.min":"Password must be longer than or equal to 8 characters"})},o={value:r.string().required().messages({"string.empty":"Retype password cannot be an empty field"})},i=a(202),l={value:i.string().min(3).max(32).required().messages({"string.base":"Username should be a type of 'text' or email","string.empty":"Username cannot be an empty field","string.min":"Username should have a minimum length of {#limit}","string.max":"Username should have a maximum length of {#limit}","any.required":"Username is a required field"})},c={value:i.string().max(320).email({tlds:{allow:!1}}).required().messages({"string.empty":"Email cannot be an empty field","string.max":"Email should have a maximum length of {#limit}","any.required":"Email is a required field"})},s=a(202),d=(s.string().required().messages({"string.empty":'"recoveryCode" cannot be an empty field',"any.required":'"recoveryCode" is a required field'}),{value:s.string().required().messages({"string.empty":'"recoveryCode" cannot be an empty field',"any.required":'"recoveryCode" is a required field'})})},301:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a.n(r),o=a(14),i=a(69),l=a(0),c=a(186),s=a(194),d=a(187),u=a(197),p=a(1),m=a(3),b=(a(6),a(4)),h=a(28),f=a(5),g=a(191),j=a(10),v=l.forwardRef((function(e,t){e.checked;var a=e.classes,r=e.className,n=e.control,o=e.disabled,i=(e.inputRef,e.label),c=e.labelPlacement,s=void 0===c?"end":c,d=(e.name,e.onChange,e.value,Object(m.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),u=Object(h.a)(),f=o;"undefined"===typeof f&&"undefined"!==typeof n.props.disabled&&(f=n.props.disabled),"undefined"===typeof f&&u&&(f=u.disabled);var v={disabled:f};return["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof n.props[t]&&"undefined"!==typeof e[t]&&(v[t]=e[t])})),l.createElement("label",Object(p.a)({className:Object(b.a)(a.root,r,"end"!==s&&a["labelPlacement".concat(Object(j.a)(s))],f&&a.disabled),ref:t},d),l.cloneElement(n,v),l.createElement(g.a,{component:"span",className:Object(b.a)(a.label,f&&a.disabled)},i))})),y=Object(f.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(v),O=a(23),x=a(45),w=a(90),k=a(180),C=l.forwardRef((function(e,t){var a=e.autoFocus,r=e.checked,n=e.checkedIcon,o=e.classes,i=e.className,c=e.defaultChecked,s=e.disabled,d=e.icon,u=e.id,f=e.inputProps,g=e.inputRef,j=e.name,v=e.onBlur,y=e.onChange,O=e.onFocus,C=e.readOnly,I=e.required,E=e.tabIndex,B=e.type,N=e.value,P=Object(m.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),S=Object(w.a)({controlled:r,default:Boolean(c),name:"SwitchBase",state:"checked"}),R=Object(x.a)(S,2),$=R[0],q=R[1],z=Object(h.a)(),D=s;z&&"undefined"===typeof D&&(D=z.disabled);var H="checkbox"===B||"radio"===B;return l.createElement(k.a,Object(p.a)({component:"span",className:Object(b.a)(o.root,i,$&&o.checked,D&&o.disabled),disabled:D,tabIndex:null,role:void 0,onFocus:function(e){O&&O(e),z&&z.onFocus&&z.onFocus(e)},onBlur:function(e){v&&v(e),z&&z.onBlur&&z.onBlur(e)},ref:t},P),l.createElement("input",Object(p.a)({autoFocus:a,checked:r,defaultChecked:c,className:o.input,disabled:D,id:H&&u,name:j,onChange:function(e){var t=e.target.checked;q(t),y&&y(e,t)},readOnly:C,ref:g,required:I,tabIndex:E,type:B,value:N},f)),$?n:d)})),I=Object(f.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(C),E=l.forwardRef((function(e,t){var a=e.classes,r=e.className,n=e.color,o=void 0===n?"secondary":n,i=e.edge,c=void 0!==i&&i,s=e.size,d=void 0===s?"medium":s,u=Object(m.a)(e,["classes","className","color","edge","size"]),h=l.createElement("span",{className:a.thumb});return l.createElement("span",{className:Object(b.a)(a.root,r,{start:a.edgeStart,end:a.edgeEnd}[c],"small"===d&&a["size".concat(Object(j.a)(d))])},l.createElement(I,Object(p.a)({type:"checkbox",icon:h,checkedIcon:h,classes:{root:Object(b.a)(a.switchBase,a["color".concat(Object(j.a)(o))]),input:a.input,checked:a.checked,disabled:a.disabled},ref:t},u)),l.createElement("span",{className:a.track}))})),B=Object(f.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(O.a)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(O.a)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(E),N=a(195),P=a(203),S=a(21),R=a(204),$=a(71),q=a(8),z=a(172),D=Object(z.a)((function(e){return{root:{minHeight:"100vh",paddingTop:"20vh","& input[readonly]":{background:"#ddd"}},content:{padding:"20vh 0"},title:{fontWeight:"bold",textTransform:"uppercase"},subTitle:{fontWeight:"bold",color:"#333"},phoneInput:{height:"255px "},form:Object(q.a)({background:"#fff",width:"100%",borderRadius:e.shape.borderRadius,padding:"50px 25px"},e.breakpoints.down("xs"),{padding:"35px 15px"}),formControl:{display:"block",marginBottom:15,width:"100%"},button:{"&:disabled":{cursor:"not-allowed",pointerEvents:"all !important"}},inputInvalid:{borderColor:e.palette.error.main+"!important","& ~ div":{borderColor:e.palette.error.main+"!important"}},formHelperText:{color:e.palette.error.main},iconClose:{position:"absolute",right:-12,top:-12,color:"#000"},handleAvatar:Object(q.a)({width:"fit-content",maxWidth:"100%",display:"flex",flexDirection:"column",alignItems:"center"},e.breakpoints.down("md"),{width:"100%",marginBottom:e.spacing(3)}),avatar:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%",border:"1px solid #ddd"},labelAvatar:{width:200,height:200,marginBottom:e.spacing(2),display:"block",position:"relative","&:hover $avatarHover":{opacity:1}},avatarHover:{opacity:0,transition:"opacity .5s",position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",background:"rgba(0,0,0,.5)",display:"flex",alignItems:"center",justifyContent:"center","& > label":{padding:e.spacing(.25,.75),background:"#fff",whiteSpace:"nowrap",borderRadius:e.shape.borderRadius,boxShadow:"0px 2px 8px rgba(0,0,0,.3)",fontWeight:"bold",cursor:"pointer","&:hover":{opacity:.8}},"&.is-show":{opacity:1,transition:"opacity .5s"}},labelDelete:{color:"red"},btnUpdateImage:{marginTop:e.spacing(2)}}})),H=a(205),W=a(94),T=a(234),F=a.n(T),L=a(250),U=a(216),M=a(298),V=a(2);t.default=function(e){e.accId,e.pAvatar,e.onUpdateNewData,e.onChangeDetails;var t=D(),a=Object(S.b)(),r=Object(S.c)((function(e){return e.auth.user})),p=Object(S.c)((function(e){return e.userInfo.info})),m=Object(l.useState)(!1),b=Object(i.a)(m,2),h=b[0],f=b[1],j=Object(l.useState)(!1),v=Object(i.a)(j,2),O=v[0],x=v[1],w=Object(l.useState)(!1),k=Object(i.a)(w,2),C=k[0],I=k[1],E=Object(P.a)(H.b),q=E.enteredInput,z=E.hasError,T=E.inputBlurHandler,A=E.inputChangeHandler,_=E.inputIsValid,J=E.setEnteredInput,X=Object(P.a)(H.c),K=X.enteredInput,G=X.hasError,Q=X.inputBlurHandler,Y=X.inputChangeHandler,Z=X.inputIsValid,ee=X.inputReset,te=Object(P.a)(H.c),ae=te.enteredInput,re=te.hasError,ne=te.inputBlurHandler,oe=te.inputChangeHandler,ie=te.inputIsValid,le=te.inputReset,ce=Object(P.a)(H.c),se=ce.enteredInput,de=ce.hasError,ue=ce.inputBlurHandler,pe=ce.inputChangeHandler,me=ce.inputIsValid,be=ce.inputReset,he=Object(P.a)(H.d),fe=he.enteredInput,ge=he.hasError,je=he.inputBlurHandler,ve=he.inputChangeHandler,ye=he.inputIsValid,Oe=he.setEnteredInput,xe=Object(l.useState)(new Date),we=Object(i.a)(xe,2),ke=we[0],Ce=we[1],Ie=Object(l.useCallback)(function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(Object(W.b)(t)).unwrap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$.b.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[a]);Object(l.useEffect)((function(){J((null===p||void 0===p?void 0:p.email)||""),Oe((null===p||void 0===p?void 0:p.username)||""),Ce(new Date(null===p||void 0===p?void 0:p.birthdate)||"")}),[p,J,Oe,Ce]);var Ee=_&&ye,Be=function(){var e=Object(o.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Ee){e.next=3;break}return e.abrupt("return");case 3:if(r={id:p._id,birthdate:F()(ke).format("yyyy-MM-DD")},C&&(r.email=q,r.username=fe,r.currentPassword=K),!h){e.next=12;break}if(Z&&ie&&me){e.next=10;break}return e.abrupt("return");case 10:r.currentPassword=K,r.password=ae;case 12:return e.prev=12,e.next=15,a(Object(W.c)(r)).unwrap();case 15:$.b.success("Update account successfully"),Object(W.b)(r.id),ee(),be(),le(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),$.b.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[12,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){(null===r||void 0===r?void 0:r._id)&&Ie(r._id)}),[Ie,r]),Object(l.useEffect)((function(){q!==(null===p||void 0===p?void 0:p.email)||fe!==(null===p||void 0===p?void 0:p.username)||new Date(ke).toDateString()!==new Date(p.birthdate).toDateString()||K.length>0?x(!0):x(!1)}),[q,fe,ke,K,p]),Object(V.jsx)("div",{className:t.root,children:Object(V.jsx)(c.a,{children:Object(V.jsx)(s.a,{className:t.form,boxShadow:3,children:Object(V.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:Be,children:Object(V.jsx)(d.a,{container:!0,spacing:2,justifyContent:"center",children:Object(V.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(y,{control:Object(V.jsx)(B,{color:"primary",checked:C,onChange:function(e){I(e.target.checked)},name:"checkedA"}),label:"Change email or username"})}),Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(N.a,{error:ge,label:"Username",helperText:ge&&"Username is invalid",fullWidth:!0,size:"small",variant:"outlined",value:fe,onBlur:je,onChange:ve,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"},readOnly:!C}})}),Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(N.a,{error:z,label:"Email",type:"email",helperText:z&&"Email is invalid",required:!0,fullWidth:!0,size:"small",variant:"outlined",value:q,onBlur:T,onChange:A,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"},readOnly:!C}})}),Object(V.jsx)("div",{className:t.formControl,children:Object(V.jsx)(U.a,{utils:L.a,children:Object(V.jsx)(u.a,{error:G,variant:"outlined",fullWidth:!0,className:t.formControl,children:Object(V.jsx)(M.a,{className:t.datePicker,label:"Birth day",size:"small",format:"MM/DD/yyyy",maxDate:new Date,value:ke,onChange:function(e){Ce(e)},error:!1,helperText:null,autoOk:!0,fullWidth:!0,variant:"inline",inputVariant:"outlined",KeyboardButtonProps:{"aria-label":"change date"}})})})}),C&&!h&&Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(N.a,{label:"Current password",type:"password",error:G,helperText:G&&"Password is invalid",fullWidth:!0,size:"small",variant:"outlined",value:K,onBlur:Q,onChange:Y,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}}})}),Object(V.jsx)(g.a,{color:"primary",variant:"subtitle1",style:{marginLeft:"auto",width:"fit-content",whiteSpace:"nowrap",textDecoration:"underline",cursor:"pointer",marginBottom:10},onClick:function(){return f((function(e){return!e}))},children:h?"Cancel":"Change Password"}),h&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(N.a,{label:"Current password",type:"password",error:G,helperText:G&&"Password is invalid",fullWidth:!0,size:"small",variant:"outlined",value:K,onBlur:Q,onChange:Y,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}}})}),Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(N.a,{label:"New password",type:"password",error:re,helperText:re&&"New password is invalid",fullWidth:!0,size:"small",variant:"outlined",value:ae,onBlur:ne,onChange:oe,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}}})}),Object(V.jsx)(u.a,{className:t.formControl,children:Object(V.jsx)(N.a,{label:"Confirm password",type:"password",error:de,helperText:de&&"Password is not match",fullWidth:!0,size:"small",variant:"outlined",value:se,onBlur:ue,onChange:pe,inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}}})})]}),Object(V.jsx)(R.a,{isLoading:!1,fullWidth:!0,type:"submit",disabled:!Ee||h&&(!Z||!ie||!me)||!O,children:"Change information"})]})})})})})})}}}]);
//# sourceMappingURL=13.b1ef586f.chunk.js.map