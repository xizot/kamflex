{"version":3,"sources":["components/Requesting/Requesting.styles.jsx","components/Requesting/Requesting.jsx","../node_modules/@material-ui/icons/esm/ArrowBackIos.js","pages/Watch/Watch.styles.jsx","pages/Watch/Watch.jsx"],"names":["makeStyles","theme","root","position","top","left","width","height","zIndex","display","justifyContent","alignItems","flexDirection","background","alpha","palette","secondary","main","box","border","borderTopColor","primary","borderBottomColor","marginBottom","spacing","borderRadius","animation","transform","borderWidth","Requesting","text","classes","useStyles","className","Typography","color","variant","createSvgIcon","React","d","minHeight","marginTop","breakpoints","down","player","paddingTop","back","transition","opacity","error","Watch","dispatch","useDispatch","id","useParams","history","useHistory","location","useLocation","isLoading","useSelector","state","stream","useState","videoSrc","setVideoSrc","setError","goBackHandler","e","preventDefault","push","from","getMovieStream","useCallback","a","streamGetById","unwrap","response","sources","useEffect","length","destroy","Plyr","videoSettings","type","source","useLayoutEffect","window","scrollTo","Box","align","Button","startIcon","ArrowBackIos","onClick","style","margin","playsInline","controls","src"],"mappings":"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","file":"static/js/15.3dcb3f31.chunk.js","sourcesContent":["import { alpha } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100vh',\r\n    zIndex: '99999',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    flexDirection: 'column',\r\n    background: alpha(theme.palette.secondary.main, 0.8),\r\n  },\r\n  box: {\r\n    width: '3.5em',\r\n    height: '4em',\r\n    border: '3px solid transparent',\r\n    borderTopColor: theme.palette.primary.main,\r\n    borderBottomColor: theme.palette.primary.main,\r\n    marginBottom: theme.spacing(2),\r\n    borderRadius: '50%',\r\n    animation: '$spinStretch 2s ease infinite',\r\n  },\r\n  '@keyframes spinStretch': {\r\n    '50%': {\r\n      transform: 'rotate(360deg) scale(0.4, 0.33)',\r\n      borderWidth: 8,\r\n    },\r\n    '100%': {\r\n      transform: 'rotate(720deg) scale(1, 1)',\r\n      borderWidth: 3,\r\n    },\r\n  },\r\n}));\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport useStyles from './Requesting.styles';\r\nfunction Requesting({ text }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.box}></div>\r\n      <Typography color=\"primary\" variant=\"body2\">\r\n        {text || 'Please waiting...'}\r\n      </Typography>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Requesting;\r\n","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"\n}), 'ArrowBackIos');","import { makeStyles } from '@material-ui/core';\r\nexport default makeStyles((theme) => ({\r\n  root: {\r\n    position: 'relative',\r\n    minHeight: 'calc(100vh - 64px)',\r\n    marginTop: 64,\r\n    background: theme.palette.secondary.main,\r\n    [theme.breakpoints.down('xs')]: {\r\n      minHeight: 'calc(100vh - 48px)',\r\n      marginTop: 48,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n    },\r\n  },\r\n  player: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      position: 'relative',\r\n      width: '100%',\r\n      paddingTop: '56.25%',\r\n      height: 'auto',\r\n    },\r\n  },\r\n  back: {\r\n    color: '#fff',\r\n    zIndex: 99,\r\n    position: 'absolute',\r\n    left: theme.spacing(5),\r\n    top: theme.spacing(2),\r\n    transition: '0.5s',\r\n    opacity: 1,\r\n  },\r\n  error: {\r\n    paddingTop: 100,\r\n  },\r\n}));\r\n","import React, { useCallback, useEffect, useLayoutEffect, useState } from 'react';\r\nimport Plyr from 'plyr';\r\nimport { useParams, useHistory, useLocation } from 'react-router-dom';\r\nimport useStyles from './Watch.styles';\r\nimport { useDispatch } from 'react-redux';\r\nimport { streamGetById } from '../../slices/stream.slice';\r\nimport { Box, Button, Typography } from '@material-ui/core';\r\nimport { ArrowBackIos } from '@material-ui/icons';\r\nimport { useSelector } from 'react-redux';\r\nimport Requesting from '../../components/Requesting/Requesting';\r\nlet player = null;\r\n\r\nfunction Watch() {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const params = useParams();\r\n  const id = params.id;\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const isLoading = useSelector((state) => state.stream.isLoading);\r\n\r\n  const [videoSrc, setVideoSrc] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  const goBackHandler = (e) => {\r\n    e.preventDefault();\r\n    history.push(location.state?.from || '/');\r\n  };\r\n\r\n  const getMovieStream = useCallback(\r\n    async (id) => {\r\n      setError(null);\r\n      try {\r\n        const response = await dispatch(streamGetById(id)).unwrap();\r\n        setVideoSrc(response.sources);\r\n      } catch (error) {\r\n        setError(error);\r\n      }\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  useEffect(() => {\r\n    getMovieStream(id);\r\n  }, [id, getMovieStream]);\r\n\r\n  useEffect(() => {\r\n    if (videoSrc?.length) {\r\n      if (player) player.destroy();\r\n      player = new Plyr('#player');\r\n      const videoSettings = {\r\n        type: 'video',\r\n        sources: videoSrc,\r\n      };\r\n      player.source = videoSettings;\r\n    }\r\n  }, [videoSrc]);\r\n  useLayoutEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n  return (\r\n    <div className={classes.root}>\r\n      {isLoading && <Requesting />}\r\n      {!isLoading && error ? (\r\n        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\">\r\n          <Typography variant=\"subtitle1\" color=\"primary\" align=\"center\" className={classes.error}>\r\n            {error}\r\n          </Typography>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<ArrowBackIos />}\r\n            onClick={(e) => goBackHandler(e)}\r\n            style={{ width: 150, margin: '20px auto' }}>\r\n            Go back\r\n          </Button>\r\n        </Box>\r\n      ) : (\r\n        <div className={classes.player}>\r\n          <video id=\"player\" playsInline controls width=\"100%\" height=\"100%\">\r\n            <source src={videoSrc} />\r\n          </video>\r\n          <Button\r\n            variant=\"text\"\r\n            className={classes.back}\r\n            startIcon={<ArrowBackIos />}\r\n            onClick={(e) => goBackHandler(e)}>\r\n            Back\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Watch;\r\n"],"sourceRoot":""}